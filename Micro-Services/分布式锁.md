## 分布式锁

>
> 参考：  https://www.jianshu.com/p/a1ebab8ce78a

### 目录
* [是什么？](#是什么？)
* [分布式锁应该具备的条件](#分布式锁应该具备的条件)
* [分布式锁的实现](#分布式锁的实现)

### 是什么？

为了防止分布式系统中的多个进程之间相互干扰，我们需要一种分布式协调技术来对这些进程进行调度。而这个分布式协调技术的核心就是来实现这个分布式锁。

### 分布式锁应该具备的条件

* 在分布式系统环境下，一个方法在同一时间只能被一个机器的一个线程执行
* 高可用，高性能的获取锁与释放锁
* 具备可重入特性（可理解为重新进入，由多于一个任务并发使用，而不必担心数据错误）
* 具备锁失效机制，防止死锁
* 具备非阻塞锁特性，即没有获取到锁将直接返回获取锁失败

### 分布式锁的实现

分布式锁的实现方式： 基于数据库实现分布式锁（排他锁），基于缓存（Redis等）实现分布式锁，基于ZooKeeper实现分布式锁。

* Memcached：利用 Memcached 的 add 命令。此命令是原子性操作，只有在 key 不存在的情况下，才能 add 成功，也就意味着线程得到了锁。
* Redis：和 Memcached 的方式类似，利用 Redis 的 setnx 命令。此命令同样是原子性操作，只有在 key 不存在的情况下，才能 set 成功。
* Zookeeper：利用 Zookeeper 的顺序临时节点，来实现分布式锁和等待队列。Zookeeper 设计的初衷，就是为了实现分布式锁服务的。
* Chubby：Google 公司实现的粗粒度分布式锁服务，底层利用了 Paxos 一致性算法。
